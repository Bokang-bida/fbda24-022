<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Botswana Styles - Admin Panel</title>
    <link rel="stylesheet" href="styles.css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <meta name="description" content="Admin panel for Botswana Styles e-commerce. Manage products, orders, and customer data.">
</head>
<body class="admin-page"> <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Loading Admin Panel...</p>
    </div>

    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1><i class="fas fa-gem"></i> Botswana Styles</h1>
                    <span class="tagline">Admin Panel</span>
                </div>
                                
                <nav class="nav-desktop">
                    <ul>
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="products.html" class="nav-link">Products</a></li>
                        <li><a href="contact.html" class="nav-link">Contact</a></li>
                        <li><a href="admin.html" class="nav-link active">Admin</a></li>
                    </ul>
                </nav>

                <div class="header-actions">
                    <button class="cart-btn" onclick="toggleCart()" aria-label="Shopping Cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cart-count">0</span>
                    </button>
                    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>

            <nav class="nav-mobile" id="nav-mobile">
                <ul>
                    <li><a href="index.html" class="nav-link" onclick="closeMobileMenu()">Home</a></li>
                    <li><a href="products.html" class="nav-link" onclick="closeMobileMenu()">Products</a></li>
                    <li><a href="contact.html" class="nav-link" onclick="closeMobileMenu()">Contact</a></li>
                    <li><a href="admin.html" class="nav-link" onclick="closeMobileMenu()">Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="admin-panel-section">
            <div class="container">
                <div class="section-header">
                    <h3><i class="fas fa-cogs"></i> Admin Dashboard</h3>
                    <p>Manage your store's products, orders, and customer data.</p>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab-btn active" onclick="showAdminTab('products-management')">
                        <i class="fas fa-box-open"></i> Product Management
                    </button>
                    <button class="admin-tab-btn" onclick="showAdminTab('orders-management')">
                        <i class="fas fa-clipboard-list"></i> Order Management
                    </button>
                    </div>

                <div id="products-management" class="admin-tab-content active">
                    <h4>Manage Products</h4>
                    <button class="btn-primary add-product-btn" onclick="showModal('add-product-modal')">
                        <i class="fas fa-plus-circle"></i> Add New Product
                    </button>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Image</th>
                                    <th>Name</th>
                                    <th>Price</th>
                                    <th>Category</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-product-list">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="orders-management" class="admin-tab-content">
                    <h4>Manage Orders</h4>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Total</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-order-list">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Botswana Styles</h4>
                    <p>Bringing you authentic African fashion with modern elegance. Celebrating the rich heritage of Botswana through premium quality clothing and accessories.</p>
                </div>
                                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="admin.html">Admin</a></li>
                    </ul>
                </div>
                                
                <div class="footer-section">
                    <h4>Customer Service</h4>
                    <ul>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="#">Size Guide</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                                
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
                        <div class="footer-bottom">
                <p>&copy; 2025 Botswana Styles. All rights reserved. | Made with <i class="fas fa-heart"></i> in Botswana</p>
            </div>
        </div>
    </footer>

    <div class="modal" id="success-modal">
        <div class="modal-content">
            <div class="modal-header success">
                <i class="fas fa-check-circle"></i>
                <h3>Success!</h3>
            </div>
            <div class="modal-body">
                <p id="success-message">Your action was completed successfully!</p>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('success-modal')" class="btn-primary">OK</button>
            </div>
        </div>
    </div>

    <div class="modal" id="error-modal">
        <div class="modal-content">
            <div class="modal-header error">
                <i class="fas fa-exclamation-circle"></i>
                <h3>Error</h3>
            </div>
            <div class="modal-body">
                <p id="error-message">An error occurred. Please try again.</p>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('error-modal')" class="btn-primary">OK</button>
            </div>
        </div>
    </div>

    <div class="modal" id="add-product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add/Edit Product</h3>
                <button class="close-modal-btn" onclick="closeModal('add-product-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="product-form">
                    <input type="hidden" id="product-id">
                    <div class="form-group">
                        <label for="product-name">Product Name</label>
                        <input type="text" id="product-name" required>
                    </div>
                    <div class="form-group">
                        <label for="product-price">Price</label>
                        <input type="number" id="product-price" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="product-category">Category</label>
                        <select id="product-category" required>
                            <option value="">Select Category</option>
                            <option value="clothing">Traditional Clothing</option>
                            <option value="accessories">Accessories</option>
                            <option value="modern">Modern Wear</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="product-description">Description</label>
                        <textarea id="product-description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="product-image-path">Image Path (e.g., images/my-image.jpg)</label>
                        <input type="text" id="product-image-path" required>
                    </div>
                    <div class="form-group">
                        <label for="product-badge">Badge (e.g., New, Sale)</label>
                        <input type="text" id="product-badge">
                    </div>
                    <button type="submit" class="btn-primary" onclick="saveProduct(event)">Save Product</button>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Highlight active navigation link
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname.split('/').pop();
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });

            // Admin panel specific tab logic
            const adminTabs = document.querySelectorAll('.admin-tab-btn');
            adminTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    adminTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    const targetTab = this.textContent.trim().toLowerCase().replace(/\s/g, '-');
                    document.querySelectorAll('.admin-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(targetTab).classList.add('active');
                });
            });

            // Initial render for admin content
            renderAdminProducts();
            renderAdminOrders();
        });

        function showAdminTab(tabId) {
            document.querySelectorAll('.admin-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');

            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.admin-tab-btn[onclick="showAdminTab('${tabId}')"]`).classList.add('active');
        }

        // Admin product management functions (simplified for client-side demo)
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                document.getElementById('product-id').value = product.id;
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-category').value = product.category;
                document.getElementById('product-description').value = product.description;
                document.getElementById('product-image-path').value = product.image;
                document.getElementById('product-badge').value = product.badge;
                showModal('add-product-modal');
            }
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== productId);
                saveToLocalStorage();
                renderAdminProducts();
                showModal('success-modal', 'Product deleted successfully!');
            }
        }

        function saveProduct(event) {
            event.preventDefault();
            const id = document.getElementById('product-id').value;
            const name = document.getElementById('product-name').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const category = document.getElementById('product-category').value;
            const description = document.getElementById('product-description').value;
            const image = document.getElementById('product-image-path').value;
            const badge = document.getElementById('product-badge').value;

            if (id) {
                // Edit existing product
                const productIndex = products.findIndex(p => p.id === parseInt(id));
                if (productIndex !== -1) {
                    products[productIndex] = { ...products[productIndex], name, price, category, description, image, badge };
                    showModal('success-modal', 'Product updated successfully!');
                }
            } else {
                // Add new product
                const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                products.push({ id: newId, name, price, category, description, image, badge });
                showModal('success-modal', 'Product added successfully!');
            }
            saveToLocalStorage();
            renderAdminProducts();
            closeModal('add-product-modal');
            document.getElementById('product-form').reset(); // Clear form
        }

        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                let detailsHtml = `
                    <p><strong>Customer:</strong> ${order.customerName}</p>
                    <p><strong>Email:</strong> ${order.email}</p>
                    <p><strong>Phone:</strong> ${order.phone}</p>
                    <p><strong>Address:</strong> ${order.address}</p>
                    <p><strong>Payment Method:</strong> ${order.paymentMethod}</p>
                    <p><strong>Order Date:</strong> ${order.date}</p>
                    <p><strong>Status:</strong> ${order.status}</p>
                    <h4>Items:</h4>
                    <ul>
                `;
                order.items.forEach(item => {
                    detailsHtml += `<li>${item.name} x ${item.quantity} (P${(item.price * item.quantity).toFixed(2)})</li>`;
                });
                detailsHtml += `</ul><p><strong>Total: P${order.total.toFixed(2)}</strong></p>`;
                showModal('success-modal', detailsHtml); // Reusing success modal for display
                document.getElementById('success-modal').querySelector('.modal-header h3').textContent = `Order #${order.id} Details`;
                document.getElementById('success-modal').querySelector('.modal-header i').className = 'fas fa-info-circle';
            }
        }

        // Override closeModal for product details modal to reset header
        const originalCloseModal = closeModal;
        closeModal = function(modalId) {
            originalCloseModal(modalId);
            if (modalId === 'success-modal') {
                document.getElementById('success-modal').querySelector('.modal-header h3').textContent = 'Success!';
                document.getElementById('success-modal').querySelector('.modal-header i').className = 'fas fa-check-circle';
            }
        };
    </script>
</body>
</html>
